<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PDF Forensics — Document Authenticity Tool{% endblock %}</title>
    <meta name="description"
        content="{% block description %}Automated multi-layer PDF forensic analysis: upload a document, receive a structured trust score and evidence report within seconds.{% endblock %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script>
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
    {% block head %}{% endblock %}
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="{{ url_for('ui.index') }}" class="nav-brand">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                    <rect width="28" height="28" rx="6" fill="url(#grad)" />
                    <path d="M8 6h8l6 6v14H8V6z" fill="none" stroke="#fff" stroke-width="1.5" stroke-linejoin="round" />
                    <path d="M16 6v6h6" fill="none" stroke="#fff" stroke-width="1.5" stroke-linejoin="round" />
                    <path d="M11 14h8M11 17h8M11 20h5" stroke="#fff" stroke-width="1.2" stroke-linecap="round" />
                    <circle cx="11" cy="14" r="1" fill="#60efff" opacity="0.8" />
                    <defs>
                        <linearGradient id="grad" x1="0" y1="0" x2="28" y2="28">
                            <stop offset="0%" stop-color="#6366f1" />
                            <stop offset="100%" stop-color="#8b5cf6" />
                        </linearGradient>
                    </defs>
                </svg>
                <span>PDF<strong>Forensics</strong></span>
            </a>
            <div class="nav-links">
                <button id="theme-toggle" class="nav-link" aria-label="Toggle Theme" style="background:none; border:none; cursor:pointer; padding: 6px;">
                    <svg id="theme-icon-light" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                    <svg id="theme-icon-dark" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <a href="{{ url_for('ui.index') }}"
                    class="nav-link {% if request.endpoint == 'ui.index' %}active{% endif %}">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
                        <polyline points="9 22 9 12 15 12 15 22" />
                    </svg>
                    Analyze
                </a>
                <a href="{{ url_for('ui.history') }}"
                    class="nav-link {% if request.endpoint == 'ui.history' %}active{% endif %}">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z" />
                    </svg>
                    History
                </a>
            </div>
        </div>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flash-container">
        {% for cat, msg in messages %}
        <div class="flash flash-{{ cat }}">
            <span>{{ msg }}</span>
            <button onclick="this.parentElement.remove()" class="flash-close">✕</button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-inner">
            <span>A PDF Document Authenticity and Tampering Detection Tool v1.0 — Decision-support only. Not a legal
                certification.</span>
            <span class="footer-sep">|</span>
            <a href="{{ url_for('api.health') }}" class="footer-link">Health Check</a>
        </div>
    </footer>

    {% block scripts %}{% endblock %}
    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const iconLight = document.getElementById('theme-icon-light');
        const iconDark = document.getElementById('theme-icon-dark');

        function updateThemeIcon(theme) {
            if (theme === 'light') {
                iconDark.style.display = 'block'; // Show moon icon to switch to dark
                iconLight.style.display = 'none';
            } else {
                iconDark.style.display = 'none';
                iconLight.style.display = 'block'; // Show sun icon to switch to light
            }
        }

        const currentTheme = document.documentElement.getAttribute('data-theme');
        updateThemeIcon(currentTheme);

        themeToggle.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            let newTheme = theme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
    </script>
</body>

</html>